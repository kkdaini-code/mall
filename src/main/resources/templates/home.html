<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>主页面</title>
		<link rel="stylesheet" type="text/css" href="http://192.168.1.136/css/bootstrap.css" />
		<link rel="stylesheet" type="text/css" href="http://192.168.1.136/css/carousel.css" />
		<link rel="stylesheet" type="text/css" href="http://192.168.1.136/css/public.css" />
		<style type="text/css">
			body {
				padding-top: 0;
			}
		</style>
	</head>
	<body>
		<main>
			<div id="carousel" class="carousel slide" data-ride="carousel">
				<ol class="carousel-indicators" id="ols">
				</ol>
				<div class="carousel-inner" id="rotation">
					<!-- 轮播图 -->
				</div>
				<a class="carousel-control-prev" href="#carousel" role="button" data-slide="prev">
					<span class="carousel-control-prev-icon" aria-hidden="true"></span>
					<span class="sr-only">Pre</span>
				</a>
				<a class="carousel-control-next" href="#carousel" role="button" data-slide="next">
					<span class="carousel-control-next-icon" aria-hidden="true"></span>
					<span class="sr-only">Next</span>
				</a>
			</div>

			<div class="container marketing">
				<!-- start 优惠券 -->
				<div id="coupon">

				</div>
				<!-- end 优惠券 -->
				<hr class="featurette-divider">
				<div class="row">
					<div class="col title">
						<svg class="icon">
							<use xlink:href="#iconnews"></use>
						</svg>
						<span>新品上市</span>
						<svg class="icon">
							<use xlink:href="#iconnews"></use>
						</svg>
						<p><span class="text-black-50">New product listing</span></p>
					</div>
				</div>
				<div id="container1">
					<!-- 新品上市 -->
				</div>

				<hr class="featurette-divider">
				<div class="row">
					<div class="col title">
						<svg class="icon">
							<use xlink:href="#iconhot"></use>
						</svg>
						<span>商/品/热/卖</span>
						<svg class="icon">
							<use xlink:href="#iconhot"></use>
						</svg>
						<p><span class="text-black-50">Hot goods</span></p>
					</div>
				</div>
				<div id="container2">

				</div>
				<hr class="featurette-divider">
				<div class="row">
					<div class="col title">
						<svg class="icon">
							<use xlink:href="#iconrecommend"></use>
						</svg>
						<span>店长推荐</span>
						<svg class="icon">
							<use xlink:href="#iconrecommend"></use>
						</svg>
						<p><span class="text-black-50">recommended</span></p>
					</div>
				</div>
				<div id="container3">
					
				</div>
			</div>
		</main>
	</body>
	<script src="https://at.alicdn.com/t/font_1962218_4o567cfo969.js" type="text/javascript" charset="utf-8"></script>

	<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
	 crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
	 crossorigin="anonymous"></script>

	<script src="http://192.168.1.136/js/public.js" type="text/javascript" charset="utf-8"></script>
	<script>
		/*轮播图*/
		$.get("/goods/1", function(data, status) {
			$(data).each(function(i) {
				var x = ``
				if (i == 0) {
					x += `<div class="carousel-item active">`
				} else {
					x += `<div class="carousel-item">`
				}
				x += `<img src="http://192.168.1.136/images/` + this.src + `" class="d-block w-100">
					</div>`
				$("#rotation").append(x)

				var y = ``;
				/* <li data-target="#carousel" data-slide-to="0" class="active"></li> */
				if (i == 0) {
					y += `<li data-target="#carousel" data-slide-to="` + i + `" class="active"></li>`
				} else {
					y += `<li data-target="#carousel" data-slide-to="` + i + `"></li>`
				}
				$("#ols").append(y);
			});
		});
/*优惠券，一排三个*/
		$.get("/discount", function(data, status) {
			var x = ''
			$(data).each(function(i) {
				if (i % 3 == 0) {
					x = '';
					x += `<div class="row mt-3">`
				}
				x += `<div class="col text-center">
						<div class="card bg-light">
							<a class="font-big"><span>` + this
					.less + `</span>RMB</a>
							<a class="font-weight-bold">订单满<span>` + this.full +
					`</span>可用</a>
							<button class="btn btn-outline-success">立即领取</button>
						</div>
					</div>`
				if (i % 3 == 2) {
					x += '</div>'
					$("#coupon").append(x);
				}
			});
		});
		/*一个大图，几个小图*/
		$.get("/goods/2", function (data, status) {
			$(data).each(function (i) {
				var more = this.more;
				var y = ``;
				y += `<div class="row">
				<div class="col">
					<img src="http://192.168.1.136/images/` + this.src +
						`" class="w-100 h-30r btn btn-link">
				</div><div class="col">`
				if (more != null && more != "") {
					var arr = more.split(",");
					$(arr).each(function (j) {
						if (j % 3 == 2) {
							y += `</div>`
						}
						if (j % 2 == 0) {
							y += `<div class="row">`
						}
						y += `<div class="col">
								<img src="http://192.168.1.136/images/` + this +
								`" class="h-15r">
							</div>`
					});
				}
				y += "</div></div></div>"
				y += `<div class="row">
						<div class="col">
							<span class="brand font-italic">
								` + this.name +
						`
							</span>
						</div>
						<div class="col">
							￥<span class="price">` + this.discount_price +
						`</span>
							<del>￥` + this.price +
						`</del>
							<button class="btn btn-link" type="button">立即抢购</button>
						</div>
					</div>`
				$("#container1").append(y);
			});
		});
		/*一行两个*/
		$.get("/goods/3", function(data, status) {
			var x=``;
			$(data).each(function (i){
				if(i%2==0){
					if(i!=0){
						x+=`</div>`
					}
					x+=`<div class="row mt-5">`
				}

				x+=	`<div class="col d-flex justify-content-center">
						<div class="card">
							<img src="http://192.168.1.136/images/`+this.src+`" class="card-img-top">
							<div class="card-body">
								<p class="card-text">`+this.title+`</p>
								<p>
									<div class="row">
										<div class="col">
											￥<span class="price">`+this.price+`</span>
										</div>
										<div class="col text-right">
											<button class="btn btn-link" type="button">立即抢购</button>
										</div>
									</div>
								</p>
							</div>
						</div>
					</div>`
			});
			x+='</div>'
			$("#container2").append(x)
		});
		/*一行一个*/
		$.get("/goods/4", function(data, status) {
			$(data).each(function(i){
				var x=``;
				x+=` <div class="row mt-2">
					<div class="col">
						<div class="card">
							<div class="row no-gutters">
								<div class="col-md-4">
									<img src="http://192.168.1.136/images/`+this.src+`" class="card-img" >
								</div>
								<div class="col-md-8">
									<div class="card-body">
										<h5 class="card-title">`+this.name+`</h5>
										<p class="card-text">`+this.title+`</p>
										<p>￥<span class="price c-red">`+this.price+`</span></p>
										<p class="card-text"><button class="btn btn-link" type="button">立即抢购</button></p>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>`
				$("#container3").append(x);
			});
		});
	</script>
</html>
