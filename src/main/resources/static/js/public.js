var app = {};app.image = "http://192.168.1.149/images/";app.look_url = "/jp/details";/* 轮播图 */app.carousel = function(url, rotation, ols) {$.get(url, function(data, status) {$(data).each(function(i) {var x = ``;if (i == 0) {x += `<div class="carousel-item active">`} else {x += `<div class="carousel-item">`}x += `<img src="` + app.image + this.src + `" class="d-block w-100 btn btn-link" onclick="app.look(` + this.id +`)"></div>`;$(rotation).append(x);var y = ``;if (i == 0) {y += `<li data-target="#carousel" data-slide-to="` + i + `" class="active"></li>`} else {y += `<li data-target="#carousel" data-slide-to="` + i + `"></li>`}$(ols).append(y);});});};/*优惠券，一排三个*/app.coupon = function(url, container) {$.get(url, function(data, status) {var x = '';$(data).each(function(i) {if (i % 3 == 0) {x = '';x += `<div class="row mt-3">`}x += `<div class="col text-center"><div class="card bg-light"><a class="font-big"><span>` +this.less + `</span>RMB</a><a class="font-weight-bold">订单满<span>` + this.full +`</span>可用</a><button class="btn btn-outline-success">立即领取</button></div></div>`;if (i % 3 == 2) {x += '</div>';$(container).append(x);}});});};/* 一个大图，几个小图 */app.products = function(url, container) {$.get(url, function(data, status) {$(data).each(function(i) {var more = this.more;var y = ``;y += `<div class="row"><div class="col"><img src="` + app.image + this.src +`" class="w-100 h-30r"></div><div class="col">`;if (more != null && more !== "") {var arr = more.split(",");$(arr).each(function(j) {if (j % 3 === 2) {y += `</div>`}if (j % 2 === 0) {y += `<div class="row">`}y += `<div class="col"><img src="` + app.image + this +`" class="h-15r"></div>`});}y += "</div></div></div>";y += `<div class="row"><div class="col"><span class="brand font-italic">` + this.name +`</span></div><div class="col">￥<span class="price">` + this.discount_price +`</span><del>￥` + this.price +`</del><button class="btn btn-link" type="button" onclick="app.look(` + this.id +`)">立即抢购</button></div></div>`;$(container).append(y);});});};/*一行两个*/app.TwoInARow = function(url, container) {$.get(url, function(data, status) {var x = ``;$(data).each(function(i) {if (i % 2 === 0) {if (i !== 0) {x += `</div>`}x += `<div class="row mt-5">`}x += `<div class="col d-flex justify-content-center"><div class="card"><img src="` + app.image +this.src + `" class="card-img-top" ><div class="card-body"><p class="card-text">` + this.title +`</p><p><div class="row"><div class="col">￥<span class="price">` +this.price +`</span></div><div class="col text-right"><button class="btn btn-link" type="button" onclick="app.look(` +this.id +`)">立即抢购</button></div></div></p></div></div></div>`});x += '</div>';$(container).append(x)});};/* 一行一个 */app.OneInARow = function(url, container) {$.get(url, function(data, status) {$(data).each(function(i) {var x = ``;x +=` <div class="row mt-2"><div class="col"><div class="card"><div class="row no-gutters"><div class="col-md-4"><img src="` +app.image + this.src +`" class="card-img" ></div><div class="col-md-8"><div class="card-body"><h5 class="card-title">` +this.name + `</h5><p class="card-text">` + this.title +`</p><p>￥<span class="price c-red">` + this.price +`</span></p><p class="card-text"><button class="btn btn-link" type="button" onclick="app.look(` +this.id +`)">立即抢购</button></p></div></div></div></div></div></div>`;$(container).append(x);});});};/* 查看详情 */app.look = function(id) {window.sessionStorage.setItem("gid", id);window.location.href = app.look_url;};/* 商品详情 */app.details = function(url, rotation, ols, container) {var gid = window.sessionStorage.getItem("gid");$.get(url + gid, function(data, status) {var x = ``;var arr;x += `<div class="carousel-item active"><img src="` + app.image + data.src + `" class="d-block w-100"></div>`;if (data.more != null && data.more != "") {arr = data.more.split(",");$(arr).each(function(j) {x += `<div class="carousel-item"><img src="` + app.image + this + `" class="d-block w-100"></div>`});}$(rotation).append(x); var y = ``;y += `<li data-target="#carousel" data-slide-to="` + 0 + `" class="active"></li>`;if (data.more != null && data.more != "") {$(arr).each(function(j) {y += `<li data-target="#carousel" data-slide-to="` + (j + 1) + `"></li>`});}$(ols).append(y);var z = ``;z += `<div class="row"><div class="col"><span class="brand font-italic">` + data.name +`</span></div><div class="col-2">￥<span class="price">` + data.discount_price + `</span><del>￥` + data.price +`</del></div></div>`;$(container).append(z);});}
